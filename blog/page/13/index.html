
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>bling on software development</title>
  <meta name="author" content="Bailey Ling">

  
  <meta name="description" content="Life has sure been a roller coaster lately ever since I started working on my new project. I&#8217;ve learned a lot about WCF in the past week. There &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://bling.github.io/blog/page/13">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="bling on software development" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic,700italic|Ubuntu:300,400,500,700,300italic,400italic,500italic,700italic' rel='stylesheet' type='text/css'>


  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-38439430-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">bling on software development</a></h1>
  
    <h2>when pragmatism meets minimalism</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:bling.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/08/08/dynamic-proxies/">Dynamic Proxies</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-08-08T00:00:00+00:00" pubdate data-updated="true">Aug 8<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content">Life has sure been a roller coaster lately ever since I started working on my new project.  I&#8217;ve learned a lot about WCF in the past week.  There&#8217;s really nothing that can teach you faster than trying something out yourself.

I&#8217;ve joined the ranks of countless others who have had to deal with implementing service behaviors to handle WCF exceptions (because by default thrown exceptions fault the communication channel), realized that WCF proxy clients breaks the &#8216;using&#8217; keyword because someone thought it was a good idea to throw exceptions in Dispose(), and even Unity&#8217;s InterfaceInterceptor not <a href="http://unity.codeplex.com/WorkItem/View.aspx?WorkItemId=3685">supporting more than 1 interface</a>!

But now that we&#8217;re talking about proxies, I&#8217;ve been thinking for a while about switching out Unity with a more mature IoC container like Windsor or StructureMap.  There are little touches that other containers have that I miss in Unity.  For example, auto-wiring.

But then again, the integration that Unity has with the rest of the Enterprise Library is very nice, of which I&#8217;m using the Logging and Exception Policy blocks, so it made sense in a way that everything in my bin folder just had Microsoft.Practices.*.dll

But now I&#8217;m seriously reconsidering.
<pre>
public interface ITestService {
  int Count { get; set; }
  void DoWork();
  bool ShouldDoWork();
}
public class TestService : ITestService {
  public int Count { get; set; }
  public void DoWork() { ++Count; }
  bool ShouldDoWork() { return true; }
}
public void HowDoTheyCompare() {
  var unity = (ITestService)new Microsoft.Practices.Unity.InterceptionExtension.InterfaceInterceptor()
                   .CreateProxy(typeof(ITestService), new TestService());
  var castle = new Castle.DynamicProxy.ProxyGenerator()
                   .CreateInterfaceProxyWithTarget&lt;ITestService&gt;(new TestService());

  Thread.Sleep(1000);

  Stopwatch sw = new Stopwatch();
  sw.Start();
  for (int i = 0; i < 1000000; ++i) { if (unity.ShouldDoWork()) unity.DoWork(); }
  sw.Stop();
  Console.WriteLine("unity: " + sw.ElapsedMilliseconds);
  sw.Reset();
  sw.Start();
  for (int i = 0; i < 1000000; ++i) { if (castle.ShouldDoWork()) castle.DoWork(); }
  sw.Stop();
  Console.WriteLine("castle: " + sw.ElapsedMilliseconds);
}
</pre>
Results?
unity: 1787
castle: 136

From this test it looks like the Unity interception is 13x slower&#8230;.but wait!  I mentioned before that Unity has a bug where it can only proxy one interface&#8230;.so to resolve that we would need to use the TransparentProxyInterceptor.

Let&#8217;s change it and test again&#8230;

unity: 30462
castle: 142

Hmmmm&#8230;.214x slower.

I guess we can try the VirtualMethodInterceptor for completeness.  After making all methods virtual, here&#8217;s the results.

unity: 3843
castle: 132

Still 29x slower.

Whatever DynamicProxy is doing&#8230;it&#8217;s orders of magnitude faster than what Unity&#8217;s doing.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Krzysztof Ko≈∫mic (2)</div>
<div class='content'>
Not only that. Castle has integration with logging, validation framework, much more mature and powerful IoC container, and also nice proxy library.</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/08/06/who-woulda-thought-ilist-kills-wcf/">Who Woulda Thought, IList<> Kills WCF</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-08-06T00:00:00+00:00" pubdate data-updated="true">Aug 6<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It can&rsquo;t be that hard!!!</p>

<p>I keep telling myself this.  I&rsquo;m writing a WCF application right now and I&rsquo;ve been running into loads of problems trying to configure things.  ABC right?  Set my address, contract, and binding&hellip;.how hard can it be??  Why is a horrible ExecutionEngineException being thrown and taking down IIS with it???</p>

<p><a href="http://connect.microsoft.com/wcf/feedback/ViewFeedback.aspx?FeedbackID=433569">http://connect.microsoft.com/wcf/feedback/ViewFeedback.aspx?FeedbackID=433569</a></p>

<p>Turns out you can&rsquo;t have an IList&lt;> of DataContracts.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/07/29/assimilated-by-altnet/">Assimilated by ALT.NET</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-29T00:00:00+00:00" pubdate data-updated="true">Jul 29<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It feels good to be revitalized again!</p>

<p>A couple months back I was very unhappy.  I was at a job I didn&rsquo;t particularly like.  The team I worked with was very rigid and used waterfall practices (even though it was a small 5 man team), and they were very resistant to change (I struggled to move them off SourceSafe, and failed).  It was time to job ship and try something else, but then the market crash hit and suddenly having money to put food on the table became a priority.</p>

<p>Life got boring and dull.  I was writing C++ code (which didn&rsquo;t even use boost because it wasn&rsquo;t allowed), and .NET 2 code when 3.5 was out for 3 years already.</p>

<p>I lost all drive to learn and grow, and after 8 hours of work I really didn&rsquo;t want to have anything to do with coding when I was home.</p>

<p>Then my life changed&hellip;</p>

<p>I found a new job, got hired, and it has been a HUGE turnaround.  I haven&rsquo;t been there long (almost done my 3 month probation), but I&rsquo;m finding myself working at home simply because I love what I&rsquo;m doing.</p>

<p>The difference?  My new team actually wants to learn new things and continually improve.</p>

<p>It is just under 3 months, and I have already helped my team implement branching conventions (rather than 2 week code freezes), unit testing conventions (rather than no conventions), and maintaining a CruiseControl.NET build server (rather than no build server).  It sure makes a HUGE difference when what you&rsquo;re doing is valued by your coworkers.</p>

<p>In my 2nd month I was sent to my first conference, DevTeach in Vancouver, and I&rsquo;d probably consider this the biggest trigger of change in my way of thinking.  I was only away from the .NET community for about a year, but sitting in on the sessions with a panel of experts really drove home exactly how obsolete I already was.</p>

<p>I&rsquo;ve heard of Test Driven Development.  But what&rsquo;s this Behavior Driven Development all about?  What&rsquo;s Domain Driven Development?  What is Inversion of Control and why should I care?</p>

<p>And then I came across ALT.NET.  I first heard about it in James Kovacs&#8217; Vancouver DevTeach session on IoC containers, who was telling everyone about a ALT.NET conference that weekend after the DevTeach conference.  I had next to no knowledge about what ALT.NET was, so I skipped out on the conference because I had other obligations that weekend.  I wish I knew more about ALT.NET earlier, because I would have rescheduled my obligation so I could attend the conference!!</p>

<p>It didn&rsquo;t take long for me to be fully immersed in everything the ALT.NET community has to offer, and I was reading up on anything and everything I could.  I practically had years of catchup to do.</p>

<p>And then I was given my big break.  A completely new project with absolutely no dependencies on anything else was assigned to me.  It was going to be a massive n-tier project with web clients, windows clients, business logic, database, and anything else you could think of.  I got the chance to design something big from scratch.</p>

<p>So now I&rsquo;m reading everything I can about domain driven development and making sure I don&rsquo;t do the classic Gang of Four mistake of overdesigning after reading ;)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/07/25/best-tool-for-job/">Best Tool for the Job&#8230;</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-25T00:00:00+00:00" pubdate data-updated="true">Jul 25<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So I recently moved, and my new place doesn&rsquo;t make internet by wire all that accessible&hellip;so now I have a big honkin desktop computer with no internet, but I have a little netbook which has wireless.</p>

<p>Hmmmm&hellip;my netbook&rsquo;s main operating system is Archlinux&hellip;and Linux is strong in networking&hellip;so it should be easy to set it up right?</p>

<p>Right I was!</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># give my ethernet an IP address and start it
</span><span class='line'>$  ifconfig eth1 192.168.0.1 netmask 255.255.255.0
</span><span class='line'>$  ifconfig eth1 up
</span><span class='line'>
</span><span class='line'># enable packet forwarding and reboot (or modify /proc)
</span><span class='line'>$  set /etc/sysctl.conf to set net.ipv4.ip_forward=1
</span><span class='line'>
</span><span class='line'># set up iptables
</span><span class='line'>$  iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE</span></code></pre></td></tr></table></div></figure>


<p>Done!  Now on my desktop I just set it to static IP 192.168.0.2, connected to my gateway 192.168.0.1, and boom, I got internet!</p>

<p>Now I can wait patiently for a wireless adapter to go on sale&hellip;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/06/24/coderush-resharper-visual-assistx/">CodeRush, ReSharper, Visual AssistX</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-24T00:00:00+00:00" pubdate data-updated="true">Jun 24<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Hmmmmm&hellip;CodeRush and ReSharper&hellip;It seems like these are the only 2 products people think about when they want that all super powerful addon that&rsquo;s supposed to quadruple their productivity.</p>

<p>I think people just look at the feature chart and say wow, ReSharper and CodeRush have hundreds of features!!!  I&rsquo;m going to be so much more productive now!</p>

<p>I&rsquo;ve tried both and there are features I like from both products.  For example, ReSharper&rsquo;s find references is extremely useful because you can filter by read-only or writeable.  I&rsquo;m also a big fan of all the visual cues that CodeRush adds to the editor.</p>

<p>But&hellip;neither of them have the 1 feature Visual AssistX I like most:  Partial Names IntelliSense.</p>

<p>What&rsquo;s that?  Let&rsquo;s say you have SomeMethodWithAReallyLongName.  If you type &ldquo;really&rdquo; with VAX&rsquo;s intellisense, that method appears in the list.  Originally I thought that was a nice feature, but it can&rsquo;t be that useful.  But then I was fortunate (or unfortunate is probably more accurate) to get to work with MSHTML.  Now I have 1 humongous namespace with around 100 different types.  Sometimes it&rsquo;s called TextRange and other times it&rsquo;s called TxtRange.  Some have the HTML prefix, and others don&rsquo;t.</p>

<p>When was the last time you could only remember a part of a method name?</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/14/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/12/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/10/27/emacs-as-my-leader-vim-survival-guide/">Emacs as my &lt;Leader&gt;: Vim Survival Guide</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/10/16/emacs-as-my-leader-evil-mode/">Emacs as my &lt;Leader&gt;: evil-mode</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/09/vim-in-emacs-bootstrap/">Vim in Emacs Bootstrap</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/08/16/modularizing-vimscript/">Modularizing VimScript</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/30/1000-stars-in-1-month/">1000 stars in 1 month</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/21/smart-tab-expansions-in-vim-with-expression-mappings/">Smart tab expansions in Vim with expression mappings</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/15/flight-of-an-open-source-project/">The flight of an open-source project</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/02/unite-dot-vim-the-plugin-you-didnt-know-you-need/">Unite.vim, The plugin you didn&#8217;t know you need</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/bling">@bling</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'bling',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Bailey Ling -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'blingdev';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
